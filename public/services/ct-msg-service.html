<polymer-element name="ct-msg-service" attributes="messages">
  <template>
    <style>
        :host {
            display: none;
        }
      </style>
  </template>
  <script>
    (function() {
      var _ws = new WebSocket("ws://localhost:8080/send"),
          _messages = [];

      _ws.onopen = function(){
      }
 
      _ws.onmessage = function(event){
        _messages.push(JSON.parse(event.data));
      }
 
      _ws.onclose = function(){
      }   

      Polymer('ct-msg-service', {
        get messages() {
          return _messages;
        },

        sendMessage: function(message) {
          _ws.send(JSON.stringify(message));
        }
      });
  })();
    </script>
</polymer-element>